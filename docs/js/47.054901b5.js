"use strict";(self["webpackChunkvue3_tetris"]=self["webpackChunkvue3_tetris"]||[]).push([[47],{2047:function(t,i,o){o.r(i),o.d(i,{default:function(){return W}});var e=o(3396),n=o(7139),s=o(9242);const l=t=>((0,e.dD)("data-v-c69cb268"),t=t(),(0,e.Cn)(),t),a=(0,e.uE)('<div class="arrow" data-v-c69cb268><div id="first" data-v-c69cb268>↑</div><div id="second" data-v-c69cb268>↑</div><div id="third" data-v-c69cb268>↑</div></div><div class="holdFrame" data-v-c69cb268></div><div class="title" id="hold" data-v-c69cb268>HOLD</div><div class="stockFrame" data-v-c69cb268></div><div class="title" id="stock" data-v-c69cb268>NEXT</div>',5),r={key:0,class:"end"},c={class:"message"},L=l((()=>(0,e._)("div",{class:"header"},[(0,e._)("span",null," Result ")],-1))),m={class:"body"},p={class:"footer"};function h(t,i,o,l,h,u){const d=(0,e.up)("PlayBoardLayer");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(d,{onEnding:t.ending,onScore:t.resultScore},null,8,["onEnding","onScore"]),a,t.flag?((0,e.wg)(),(0,e.iD)("div",r,[(0,e._)("div",c,[L,(0,e._)("div",m,[(0,e._)("span",null,"スコア："+(0,n.zw)(t.score),1),(0,e._)("span",null,[(0,e.Uk)("ユーザー名： "),(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":i[0]||(i[0]=i=>t.userName=i)},null,512),[[s.nr,t.userName]])])]),(0,e._)("div",p,[(0,e._)("button",{onClick:i[1]||(i[1]=(...i)=>t.moveToTop&&t.moveToTop(...i))},"Topへ戻る"),(0,e._)("button",{id:"sendButton",onClick:i[2]||(i[2]=(...i)=>t.moveToRanking&&t.moveToRanking(...i))},"ランキングへ送信")])])])):((0,e.wg)(),(0,e.iD)("button",{key:1,id:"return",onClick:i[3]||(i[3]=(...i)=>t.moveToTop&&t.moveToTop(...i))},"Topへ戻る"))],64)}var u=o(4870),d=o(2483);const S=t=>((0,e.dD)("data-v-3abde733"),t=t(),(0,e.Cn)(),t),v={class:"PlayBoardLayerRoot"},g={class:"level"},w={class:"score"},O=S((()=>(0,e._)("br",null,null,-1)));function y(t,i,o,s,l,a){const r=(0,e.up)("Block"),c=(0,e.up)("MinoLayer");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("div",v,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.stageState.wallList,(t=>((0,e.wg)(),(0,e.j4)(r,{key:t.id,class:"BlockElement",x:t.position.x,y:t.position.y,angle:t.angle,color:t.color},null,8,["x","y","angle","color"])))),128)),(0,e.Wm)(c,{onMap:t.getMap,onScore:t.updateScore,onLevel:t.setLevel},null,8,["onMap","onScore","onLevel"])]),(0,e._)("div",g,"Lv."+(0,n.zw)(t.level),1),(0,e._)("div",w,[(0,e.Uk)("SCORE"),O,(0,e.Uk)((0,n.zw)(t.totalScore),1)])],64)}o(7658);const E=t=>{const i=`color: ${t.color};transform: translate(${t.x}px, ${t.y}px);`;return(0,e.h)("div",{class:"BlockRoot",style:i})},_=t=>{let i=!1;return(0,e.bv)((()=>{const o=()=>{requestAnimationFrame((()=>{if(i)return;const e=t();e&&o()}))};o()})),(0,e.Jd)((()=>{i=!0})),{}};function C(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}class B{constructor(t=0,i=0){C(this,"x",void 0),C(this,"y",void 0),this.x=t,this.y=i}get length(){return Math.sqrt(this.x**2+this.y**2)}get angle(){const t=t=>t/Math.PI*180;return t(Math.atan2(this.y,this.x))}add(t){return new B(this.x+t.x,this.y+t.y)}sub(t){return new B(this.x-t.x,this.y-t.y)}times(t){return new B(this.x*t,this.y*t)}unit(t=1){const i=this.length;return new B(this.x/i*t,this.y/i*t)}limit(t=1){return this.length<=t?this:this.unit(t)}rotate(t){const i=t=>t*Math.PI/180,o=i(this.angle+t),e=this.length;return new B(Math.cos(o)*e,Math.sin(o)*e)}}class I{}C(I,"BLOCK_SIZE",40),C(I,"NAMES",["T","I","O","L","J","S","Z"]),C(I,"COLORS",{T:"138, 43, 226",I:"0, 255, 255",L:"0, 0, 255",J:"255, 165, 0",O:"255, 255, 0",S:"0, 255, 0",Z:"255, 0, 0"}),C(I,"SHAPE",{T:[new B(0,0),new B(0,-1),new B(-1,0),new B(1,0)],I:[new B(0,0),new B(-1,0),new B(1,0),new B(2,0)],L:[new B(0,0),new B(-1,0),new B(1,0),new B(1,-1)],J:[new B(0,0),new B(-1,-1),new B(-1,0),new B(1,0)],O:[new B(0,0),new B(1,0),new B(0,-1),new B(1,-1)],S:[new B(0,0),new B(-1,0),new B(0,-1),new B(1,-1)],Z:[new B(0,0),new B(-1,-1),new B(0,-1),new B(1,0)]});var Z=I;const K=.25;let f=0;const x=()=>Z.NAMES[Math.floor(7*Math.random())];class k{constructor(t,i,o,e,n,s){C(this,"id",f++),C(this,"position",new B(0,0)),C(this,"name",x()),C(this,"angle",360*Math.random()),C(this,"vector",new B),C(this,"force",K),C(this,"color",""),C(this,"shape",[]),C(this,"insensitiveTerms",0),this.position=new B(t,i),this.name=o,this.color=s?"rgba("+e+", "+s+")":"rgba("+e+", 1.0)",this.shape=n}update(){const t=new B(0,Z.BLOCK_SIZE);this.position=this.position.add(t),this.position.y>20*Z.BLOCK_SIZE&&(this.position=new B(this.position.x,20*Z.BLOCK_SIZE)),this.position.y<0&&(this.position=new B(this.position.x,0))}drop(){const t=new B(0,Z.BLOCK_SIZE);this.position=this.position.add(t),this.position.y>21*Z.BLOCK_SIZE&&(this.position=new B(this.position.x,21*Z.BLOCK_SIZE))}slideLeft(){this.position=new B(this.position.x-Z.BLOCK_SIZE,this.position.y)}slideRight(){this.position=new B(this.position.x+Z.BLOCK_SIZE,this.position.y)}slideUp(){this.position=new B(this.position.x,this.position.y-Z.BLOCK_SIZE)}setForce(t){this.force=t}resize(t){this.position=new B(this.position.x+t,this.position.y)}}const M={class:"MinoLayerRoot"};function b(t,i,o,n,s,l){const a=(0,e.up)("Block");return(0,e.wg)(),(0,e.iD)("div",M,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.stageState.ghost,(t=>((0,e.wg)(),(0,e.j4)(a,{key:t.id,class:"BlockElement",x:t.position.x,y:t.position.y,angle:t.angle,color:t.color,scale:t.scale},null,8,["x","y","angle","color","scale"])))),128)),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.stageState.minoList,(t=>((0,e.wg)(),(0,e.j4)(a,{key:t.id,class:"BlockElement",x:t.position.x,y:t.position.y,angle:t.angle,color:t.color,scale:t.scale},null,8,["x","y","angle","color","scale"])))),128)),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.stageState.holdMino,(t=>((0,e.wg)(),(0,e.j4)(a,{key:t.id,class:"BlockElement",x:t.position.x,y:t.position.y,angle:t.angle,color:t.color,scale:t.scale},null,8,["x","y","angle","color","scale"])))),128)),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.stageState.stock,(t=>((0,e.wg)(),(0,e.j4)(a,{key:t.id,class:"BlockElement",x:t.position.x,y:t.position.y,angle:t.angle,color:t.color,scale:t.scale},null,8,["x","y","angle","color","scale"])))),128))])}const N=(t,i)=>{const o=i=>{t?.(i)};return(0,e.bv)((()=>{const t=i??document.body;t.addEventListener("keydown",o)})),(0,e.Ah)((()=>{const t=i??document.body;t.removeEventListener("keydown",o)})),{}};var J=(0,e.aZ)({name:"MinoLayer",components:{Block:E},props:{keyInput:{type:String,default:""}},setup(t,i){let o=(0,u.iH)("");const n=(0,u.qj)({minoList:[],map:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],t:0,healthCheckTime:0,name:JSON.parse(JSON.stringify(Z.NAMES)),holdMino:[],stock:[],ghost:[],totalScore:0,ren:0,deleteLineNum:0,level:1});let s=!1,l=!0,a=(0,u.iH)(Math.floor(.5*window.innerWidth)-5*Z.BLOCK_SIZE),r=2*Z.BLOCK_SIZE;const c=()=>{n.map=JSON.parse(JSON.stringify(new Array(22).fill(new Array(10).fill(0)))),n.minoList.map((t=>{n.map[(t.position.y-r)/Z.BLOCK_SIZE+2][(t.position.x-a.value)/Z.BLOCK_SIZE]=1}))},L=()=>{n.name.push("T"),n.name.push("I"),n.name.push("O"),n.name.push("L"),n.name.push("J"),n.name.push("S"),n.name.push("Z")},m=()=>{let t=Math.floor(Math.random()*n.name.length);0===n.name.length&&L();const i=n.name[t];return n.name.splice(t,1),i},p=()=>{let t=a.value+14*Z.BLOCK_SIZE,i=20*Z.BLOCK_SIZE;const o=m(),e=Z.COLORS[o],s=JSON.parse(JSON.stringify(Z.SHAPE[o]));for(let l=0;l<s.length;l++)n.stock.push(new k(t+s[l].x*Z.BLOCK_SIZE,i+s[l].y*Z.BLOCK_SIZE,o,e,s))},h=()=>{const t=a.value-5*Z.BLOCK_SIZE,i=r+3*Z.BLOCK_SIZE;for(let o=0;o<4;o++){let e=n.minoList.length;const s=n.minoList[e-1],l=JSON.parse(JSON.stringify(s.name)),a=Z.COLORS[l],r=JSON.parse(JSON.stringify(Z.SHAPE[l]));n.holdMino.push(new k(t+r[o].x*Z.BLOCK_SIZE,i+r[o].y*Z.BLOCK_SIZE,l,a,r)),n.minoList.splice(e-1,1)}if(4!==n.holdMino.length){const t=n.holdMino[0];let i=a.value+4*Z.BLOCK_SIZE,o=1*Z.BLOCK_SIZE;const e=JSON.parse(JSON.stringify(t.name)),s=Z.COLORS[e],l=JSON.parse(JSON.stringify(Z.SHAPE[e]));for(let a=0;a<4;a++)n.minoList.push(new k(i+l[a].x*Z.BLOCK_SIZE,o+l[a].y*Z.BLOCK_SIZE,e,s,l)),n.holdMino.shift()}else d(),S()},d=()=>{let t=a.value+4*Z.BLOCK_SIZE,i=1*Z.BLOCK_SIZE,o=n.stock[0].name;const e=JSON.parse(JSON.stringify(Z.SHAPE[o])),s=Z.COLORS[o];p();for(let l=0;l<e.length;l++)n.minoList.push(new k(t+e[l].x*Z.BLOCK_SIZE,i+e[l].y*Z.BLOCK_SIZE,o,s,e)),n.stock.shift()},S=()=>{n.stock.map(((t,i)=>{t.position=new B(t.position.x,(4+Z.SHAPE[t.name][i%4].y+3*Math.floor(i/4))*Z.BLOCK_SIZE)}))},v=t=>{let i=t.length;return!(i<4)&&(t[t.length-1].position.y===21*Z.BLOCK_SIZE||t[t.length-2].position.y===21*Z.BLOCK_SIZE||t[t.length-3].position.y===21*Z.BLOCK_SIZE||t[t.length-4].position.y===21*Z.BLOCK_SIZE)},g=t=>{let i=t.length;if(i<4)return!1;for(let o=0;o<4;o++)if(1==n.map[(t[i-(o+1)].position.y-r)/Z.BLOCK_SIZE+3][(t[i-(o+1)].position.x-a.value)/Z.BLOCK_SIZE])return!0;return!1};N((async t=>{if(console.log("KEY:",t.key),o.value=t.key,"ArrowLeft"===o.value&&(E(),w(),O(),R()),"ArrowRight"===o.value&&(C(),w(),y(),R()),"ArrowDown"===o.value&&(v(n.minoList)||g(n.minoList)||(I(n.minoList),n.t=1,n.totalScore+=5,i.emit("score",n.totalScore))),"ArrowUp"===o.value){while(!v(n.minoList)&&!g(n.minoList))I(n.minoList),n.totalScore+=5;i.emit("score",n.totalScore),s=!0}"x"===o.value&&(await J(),R()),"z"===o.value&&(await T(),R()),"a"===o.value&&l&&(h(),l=!1,s=!0)}));const w=async()=>{let t=0,i=n.minoList.length;return(n.minoList[i-1].position.x>a.value+9*Z.BLOCK_SIZE||n.minoList[i-2].position.x>a.value+9*Z.BLOCK_SIZE||n.minoList[i-3].position.x>a.value+9*Z.BLOCK_SIZE||n.minoList[i-4].position.x>a.value+9*Z.BLOCK_SIZE)&&(E(),t++,w()),(n.minoList[i-1].position.x<a.value||n.minoList[i-2].position.x<a.value||n.minoList[i-3].position.x<a.value||n.minoList[i-4].position.x<a.value)&&(C(),t++,w()),t},O=async()=>{let t=0;const i=[n.minoList[n.minoList.length-4].position,n.minoList[n.minoList.length-3].position,n.minoList[n.minoList.length-2].position,n.minoList[n.minoList.length-1].position];return 1!=n.map[(i[0].y-r)/Z.BLOCK_SIZE+2][(i[0].x-a.value)/Z.BLOCK_SIZE]&&1!=n.map[(i[1].y-r)/Z.BLOCK_SIZE+2][(i[1].x-a.value)/Z.BLOCK_SIZE]&&1!=n.map[(i[2].y-r)/Z.BLOCK_SIZE+2][(i[2].x-a.value)/Z.BLOCK_SIZE]&&1!=n.map[(i[3].y-r)/Z.BLOCK_SIZE+2][(i[3].x-a.value)/Z.BLOCK_SIZE]||(C(),t++,t+=await O()),t},y=async()=>{let t=0;const i=[n.minoList[n.minoList.length-4].position,n.minoList[n.minoList.length-3].position,n.minoList[n.minoList.length-2].position,n.minoList[n.minoList.length-1].position];return 1!==n.map[(i[0].y-r)/Z.BLOCK_SIZE+2][(i[0].x-a.value)/Z.BLOCK_SIZE]&&1!==n.map[(i[1].y-r)/Z.BLOCK_SIZE+2][(i[1].x-a.value)/Z.BLOCK_SIZE]&&1!==n.map[(i[2].y-r)/Z.BLOCK_SIZE+2][(i[2].x-a.value)/Z.BLOCK_SIZE]&&1!==n.map[(i[3].y-r)/Z.BLOCK_SIZE+2][(i[3].x-a.value)/Z.BLOCK_SIZE]||(E(),t++,t+=await y()),t},E=()=>{let t=n.minoList.length;for(let i=0;i<4;i++)n.minoList[t-(i+1)].slideLeft()},C=()=>{let t=n.minoList.length;for(let i=0;i<4;i++)n.minoList[t-(i+1)].slideRight()},I=t=>{let i=t.length;if(0!=i)for(let o=0;o<4;o++)t[i-(o+1)].drop()},K=()=>{let t=n.minoList.length;if("O"!=n.minoList[t-4].name)for(let i=0;i<4;i++)n.minoList[t-(4-i)].position=new B(n.minoList[t-4].position.x-n.minoList[t-(4-i)].shape[i].y*Z.BLOCK_SIZE,n.minoList[t-4].position.y+n.minoList[t-(4-i)].shape[i].x*Z.BLOCK_SIZE),n.minoList[t-(4-i)].shape[i]=new B(-1*n.minoList[t-(4-i)].shape[i].y,n.minoList[t-(4-i)].shape[i].x)},f=()=>{let t=n.minoList.length;if("O"!=n.minoList[t-4].name)for(let i=1;i<4;i++)n.minoList[t-(4-i)].position=new B(n.minoList[t-4].position.x+n.minoList[t-(4-i)].shape[i].y*Z.BLOCK_SIZE,n.minoList[t-4].position.y-n.minoList[t-(4-i)].shape[i].x*Z.BLOCK_SIZE),n.minoList[t-(4-i)].shape[i]=new B(n.minoList[t-(4-i)].shape[i].y,-1*n.minoList[t-(4-i)].shape[i].x)},x=(t,i)=>{let o=n.minoList.length;for(let e=0;e<4;e++)n.minoList[o-(4-e)].position=t[e],n.minoList[o-(4-e)].shape[e]=i[e]},M=t=>"I"===t,b=(t,i,o,e)=>{let s=n.minoList.length;return((M(n.minoList[s-4].name)?i>2:i>1)||n.minoList[s-1].position.x<a.value||n.minoList[s-2].position.x<a.value||n.minoList[s-3].position.x<a.value||n.minoList[s-4].position.x<a.value||n.minoList[s-1].position.x>a.value+9*Z.BLOCK_SIZE||n.minoList[s-2].position.x>a.value+9*Z.BLOCK_SIZE||n.minoList[s-3].position.x>a.value+9*Z.BLOCK_SIZE||n.minoList[s-4].position.x>a.value+9*Z.BLOCK_SIZE)&&(x(o,e),!0)},J=async()=>{const t=n.minoList.length;let i=[n.minoList[t-4].position,n.minoList[t-3].position,n.minoList[t-2].position,n.minoList[t-1].position],o=[n.minoList[t-4].shape[0],n.minoList[t-3].shape[1],n.minoList[t-2].shape[2],n.minoList[t-1].shape[3]];if(K(),v(n.minoList))return void x(i,o);const e=await w();let s=await O();b(e,s,i,o)&&K();const l=await y();b(e,l,i,o)},T=async()=>{const t=n.minoList.length;let i=[n.minoList[t-4].position,n.minoList[t-3].position,n.minoList[t-2].position,n.minoList[t-1].position],o=[n.minoList[t-4].shape[0],n.minoList[t-3].shape[1],n.minoList[t-2].shape[2],n.minoList[t-1].shape[3]];if(f(),v(n.minoList))return void x(i,o);const e=await w();let s=await y();b(e,s,i,o)&&f();const l=await O();b(e,l,i,o)},H=()=>{let t=0,i=!1;for(let o=2;o<n.map.length;o++){let e=0;for(let t=0;t<n.map[o].length;t++)e+=n.map[o][t];if(10===e){n.deleteLineNum++,t++,i=!0;for(let t=n.minoList.length-1;t>=0;t--){let i=n.minoList[t].position.y,e=r+(o-2)*Z.BLOCK_SIZE;i===e?n.minoList.splice(t,1):i<e&&n.minoList[t].drop()}c(),n.deleteLineNum%5===0&&Math.ceil(n.deleteLineNum/5)<30&&(n.level=Math.ceil(n.deleteLineNum/5)+1)}}i?n.ren++:n.ren=0,n.totalScore+=t*t*100,n.totalScore+=t*t*n.ren*20,t=0},R=()=>{const t=n.minoList.length;n.ghost=JSON.parse(JSON.stringify([]));for(let i=0;i<4;i++){let o=n.minoList[t-(i+1)].position.x,e=n.minoList[t-(i+1)].position.y;const s=n.minoList[t-(i+1)].name,l=JSON.parse(JSON.stringify(n.minoList[t-(i+1)].shape)),a=Z.COLORS[s],r="0.3";n.ghost.push(new k(o,e,s,a,l,r))}while(!v(n.ghost)&&!g(n.ghost))I(n.ghost)};for(let e=0;e<4;e++)p();d(),S(),R(),_((()=>1!==n.map[1][4]&&((n.t%(46-Math.floor(1.5*n.level))===0||s)&&(v(n.minoList)||g(n.minoList)?(c(),H(),console.log("REN",n.ren),console.log("SCORE",n.totalScore),A(),d(),S(),R(),l=!0,i.emit("score",n.totalScore)):(I(n.minoList),R()),s&&(s=!1,n.t=0)),n.t++,n.healthCheckTime++,!0)));const A=()=>{i.emit("map",n.map),i.emit("level",n.level)},D=()=>{const t=Math.floor(.5*window.innerWidth)-5*Z.BLOCK_SIZE;for(let i=0;i<n.minoList.length;i++)n.minoList[i].resize(t-a.value);for(let i=0;i<n.holdMino.length;i++)n.holdMino[i].resize(t-a.value);for(let i=0;i<n.ghost.length;i++)n.ghost[i].resize(t-a.value);for(let i=0;i<n.stock.length;i++)n.stock[i].resize(t-a.value);a.value=t};return(0,e.bv)((()=>{window.addEventListener("resize",D)})),{baseX:a,drawMino:p,hold:h,stageState:n,mapEmit:A}}}),T=o(89);const H=(0,T.Z)(J,[["render",b],["__scopeId","data-v-69071696"]]);var R=H,A=(0,e.aZ)({name:"PlayBoardLayer",components:{Block:E,MinoLayer:R},props:{},setup(t,i){const o=(0,u.qj)({map:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],wallList:[],t:0}),n=t=>{o.map=t};let s=(0,u.iH)(Math.floor(.5*window.innerWidth)-6*Z.BLOCK_SIZE),l=(0,u.iH)(Math.floor(.5*window.innerWidth)+5*Z.BLOCK_SIZE);const a=()=>{let t=2*Z.BLOCK_SIZE,i=22*Z.BLOCK_SIZE,e=0;for(let n=0;n<21;n++)o.wallList.push(new k(s.value,t+n*Z.BLOCK_SIZE,"wall","128,128,128",[])),o.wallList.push(new k(l.value,t+n*Z.BLOCK_SIZE,"wall","128,128,128",[])),e<10&&(o.wallList.push(new k(s.value+(e+1)*Z.BLOCK_SIZE,i,"wall","128, 128, 128",[])),e++)};let r=(0,u.iH)(0);const c=t=>{r.value=t};let L=(0,u.iH)(1);const m=t=>{L.value=t};a(),console.log("Game Start"),_((()=>1!==o.map[1][4]||(console.log("Game Over"),i.emit("ending",!0),i.emit("score",r.value),!1)));const p=()=>{const t=Math.floor(.5*window.innerWidth)-6*Z.BLOCK_SIZE;for(let i=0;i<o.wallList.length;i++)o.wallList[i].resize(t-s.value);s.value=t};return(0,e.bv)((()=>{window.addEventListener("resize",p)})),{baseX1:s,baseX2:l,stageState:o,getMap:n,totalScore:r,updateScore:c,level:L,setLevel:m}}});const D=(0,T.Z)(A,[["render",y],["__scopeId","data-v-3abde733"]]);var P=D,z=o(5165),j=(0,e.aZ)({name:"Stage",components:{PlayBoardLayer:P},props:{maxFish:{type:Number,default:50}},setup(){let t=(0,u.iH)(!1),i=(0,u.iH)(0),o=(0,u.iH)("");const e=(0,d.tv)(),n=new z.Z,s=i=>{i&&(t.value=!0)},l=t=>{i.value=t},a=async(t,i)=>await n.sendScore(t,i),r=async()=>(await a(o.value,i.value),e.replace({name:"Ranking"})),c=()=>(console.log("click!!!"),e.replace({name:"Top"}));return{flag:t,score:i,userName:o,ending:s,resultScore:l,moveToRanking:r,moveToTop:c}}});const Y=(0,T.Z)(j,[["render",h],["__scopeId","data-v-c69cb268"]]);var W=Y}}]);
//# sourceMappingURL=47.054901b5.js.map